{% extends "base.html" %}
{% block title %}{{ category.name if category else slug }} - My Blog{% endblock %}
{% block content %}
<div class="container">
  <section class="page-content">
    <div class="page-header">
      <h1>{{ category.name if category else slug }}</h1>
      {% if category and category.description %}
        <p class="category-description"><strong>{{ category.description }}</strong></p>
      {% endif %}
      <hr class="accent-hr">
    </div>
    
    <div class="content-body">
      
      {% if posts %}
        <div class="posts-list">
          {% for p in posts %}
            <article class="post-item">
              <h2 class="post-title"><a class="post-title" href="{{ url_for('blog.post_detail', slug=p.slug) }}">{{ p.title }}</a></h2>
              {% if p.excerpt %}
                <p class="post-excerpt">{{ p.excerpt }}</p>
              {% endif %}
              {% if p.created_at %}
                <div class="post-meta">
                  <small>Published: {{ p.created_at.strftime('%B %d, %Y') }}</small>
                </div>
              {% endif %}
            </article>
          {% endfor %}
        </div>
      {% else %}
        <div class="empty-state">
          <p>No posts in this category yet.</p>
        </div>
      {% endif %}

      {% if pages > 1 %}
        <nav class="pagination" aria-label="pagination">
          <div class="pagination-links">
            {% if page > 1 %}
              <a href="{{ url_for('blog.by_category', slug=slug, page=page-1, per_page=per_page) }}" class="pagination-link">← Previous</a>
            {% endif %}
            <span class="pagination-info">Page {{ page }} of {{ pages }}</span>
            {% if page < pages %}
              <a href="{{ url_for('blog.by_category', slug=slug, page=page+1, per_page=per_page) }}" class="pagination-link">Next →</a>
            {% endif %}
          </div>
        </nav>
      {% endif %}
    </div>
  </section>
</div>
{% endblock %}
